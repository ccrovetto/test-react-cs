(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,a){e.exports=a(64)},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),c=a.n(o),l=(a(42),a(18)),i=a(15),u=a(34),s=a(35),d=a(6),h=a(36),E=a.n(h).a.create({baseURL:"".concat("http://localhost:3000","/api/v1")});E.defaults.headers.post.Accept="application/json",E.defaults.headers.post["Content-Type"]="application/json";var m={getCounters:function(){return E.get("/counters").then(function(e){return e.data})},addCounter:function(e){return E.post("/counter",{title:e}).then(function(e){return e.data})},increaseCounter:function(e){return E.post("/counter/inc",{id:e}).then(function(e){return e.data})},decreaseCounter:function(e){return E.post("/counter/dec",{id:e}).then(function(e){return e.data})},removeCounter:function(e){return E.delete("/counter",{data:{id:e}}).then(function(e){return e.data})}},p=function(){return function(e,t){e({type:"FETCH_COUNTERS"}),m.getCounters().then(function(a){return e({type:"FETCH_COUNTERS_SUCCESS",payload:a.sort(O(t().counters.orderBy))})}).catch(function(t){return e({type:"FETCH_COUNTERS_ERROR",payload:t})})}},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"increase";return function(a,n){a({type:"SET_COUNTER"}),m["".concat(t,"Counter")](e).then(function(e){return a({type:"SET_COUNTER_SUCCESS",payload:n().counters.data.map(function(t){return t.id===e.id&&(t.count=e.count),t}).sort(O(n().counters.orderBy))})}).catch(function(e){return a({type:"SET_COUNTER_ERROR",payload:e})})}},O=function(e){return function(t,a){var n="string"===typeof t[e]?t[e].toUpperCase():t[e],r="string"===typeof a[e]?a[e].toUpperCase():a[e],o=0;return n>r?o=1:n<r&&(o=-1),o}},C={data:[],isLoading:!1,error:null,hasError:!1,success:!1,orderBy:"title"},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_COUNTERS":return Object(d.a)({},e,{isLoading:!0,hasError:!1,error:null});case"FETCH_COUNTERS_ERROR":return Object(d.a)({},e,{isLoading:!1,hasError:!0,error:t.payload});case"FETCH_COUNTERS_SUCCESS":return Object(d.a)({},e,{isLoading:!1,data:t.payload});case"ADD_COUNTER":return Object(d.a)({},e,{isLoading:!0,hasError:!1,error:null});case"ADD_COUNTER_ERROR":return Object(d.a)({},e,{isLoading:!1,hasError:!0,error:t.payload});case"ADD_COUNTER_SUCCESS":return Object(d.a)({},e,{isLoading:!1,data:t.payload});case"SET_COUNTER":return Object(d.a)({},e,{isLoading:!0,hasError:!1,error:null});case"SET_COUNTER_ERROR":return Object(d.a)({},e,{isLoading:!1,hasError:!0,error:t.payload});case"SET_COUNTER_SUCCESS":return Object(d.a)({},e,{isLoading:!1,data:t.payload});case"REMOVE_COUNTER":return Object(d.a)({},e,{isLoading:!0,hasError:!1,error:null});case"REMOVE_COUNTER_ERROR":return Object(d.a)({},e,{isLoading:!1,hasError:!0,error:t.payload});case"REMOVE_COUNTER_SUCCESS":return Object(d.a)({},e,{isLoading:!1,data:t.payload});case"SET_ORDER":return Object(d.a)({},e,{orderBy:t.payload.orderBy,data:t.payload.data});default:return e}},b=Object(i.c)({counters:y}),R=a(9),v=a(10),g=a(12),S=a(11),j=a(8),T=a(13),_=a(73),N=a(70),U=a(71),D=a(65),k=a(66),B=a(67),L=a(68),w=a(69),F=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(g.a)(this,Object(S.a)(t).call(this,e))).state={title:""},a.handleChange=a.handleChange.bind(Object(j.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(j.a)(a)),a}return Object(T.a)(t,e),Object(v.a)(t,[{key:"handleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.title),this.setState({title:""})}},{key:"render",value:function(){var e=this.state.title;return r.a.createElement(D.a,{action:"#",onSubmit:this.handleSubmit},r.a.createElement(k.a,null,r.a.createElement(B.a,{htmlFor:"title"},"Titulo"),r.a.createElement(L.a,{type:"text",name:"title",id:"title",value:e,onChange:this.handleChange}),r.a.createElement(w.a,{className:"my-2",color:"primary"},"Agregar")))}}]),t}(r.a.Component),V=function(e){function t(){return Object(R.a)(this,t),Object(g.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props,t=e.filterValue,a=e.onChange;e.rule;return r.a.createElement("div",null,r.a.createElement(k.a,null,r.a.createElement(B.a,{htmlFor:"filterValue"},"Buscar"),r.a.createElement(L.a,{className:"md",type:"text",name:"filterValue",id:"filterValue",value:t,onChange:a})))}}]),t}(r.a.Component),A=a(72),x=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(g.a)(this,Object(S.a)(t).call(this,e))).handleChange=function(e){a.setState({filterValue:e.target.value})},a.getTotalCounts=function(){var e=0;return a.getFilteredData().forEach(function(t){e+=t.count}),e},a.getFilteredData=function(){var e=a.state,t=e.filterValue,n=e.filterRules,r=e.indexRule,o=a.props.countersState.data,c=n[r].value;return"title"===c?o.filter(function(e){return e.title.indexOf(t)>=0}):"min"===c&&parseInt(t,10)?o.filter(function(e){return e.count<parseInt(t,10)}):"max"===c&&parseInt(t,10)?o.filter(function(e){return e.count>parseInt(t,10)}):o},a.state={filterValue:"",filterRules:[{title:"Nombre",value:"title"},{title:"Menores a",value:"min"},{title:"Mayores a",value:"max"}],indexRule:0},a}return Object(T.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.state,t=e.filterValue,a=e.filterRules,n=e.indexRule,o=this.props,c=o.countersState,l=o.onOrder,i=o.onDecrease,u=o.onIncrease,s=o.onRemove;c.isLoading;return r.a.createElement("div",{className:"counter-list"},r.a.createElement(N.a,{Form:!0},r.a.createElement(U.a,{md:6},r.a.createElement(V,{rules:"",rule:a[n],searchPhrase:t,onChange:this.handleChange})),r.a.createElement(U.a,{md:2},r.a.createElement(k.a,null,r.a.createElement(B.a,{htmlFor:"btnf"},"Filtrar Por:"),r.a.createElement(w.a,{id:"btnf",type:"button",onClick:function(e){return l()}},"Nombre"))),r.a.createElement(U.a,{md:2},r.a.createElement(k.a,null,r.a.createElement(w.a,{className:"mt-3",id:"btn",type:"button",onClick:function(e){return l("count")}},"Cantidad")))),r.a.createElement(A.a,{hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Titulo"),r.a.createElement("th",null,"Contadores"),r.a.createElement("th",null),r.a.createElement("th",null,"Acciones"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.getFilteredData().map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.count),r.a.createElement("td",null,r.a.createElement(w.a,{color:"warning",onClick:function(t){return i(e.id)}},"1-")),r.a.createElement("td",null,r.a.createElement(w.a,{color:"success",onClick:function(t){return u(e.id)}},"1+")),r.a.createElement("td",null,r.a.createElement(w.a,{color:"danger",onClick:function(t){return s(e.id)}},"Eliminar")))}))),r.a.createElement("h4",{className:"counter-list__total"},"Total ",this.getTotalCounts()))}}]),t}(r.a.Component),I=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(g.a)(this,Object(S.a)(t).call(this,e))).props.dispatch(p()),a.handleAddCounter=a.handleAddCounter.bind(Object(j.a)(a)),a.handleIncrease=a.handleIncrease.bind(Object(j.a)(a)),a.handleDecrease=a.handleDecrease.bind(Object(j.a)(a)),a.handleRemove=a.handleRemove.bind(Object(j.a)(a)),a.handleOrderBy=a.handleOrderBy.bind(Object(j.a)(a)),a}return Object(T.a)(t,e),Object(v.a)(t,[{key:"handleAddCounter",value:function(e){this.props.dispatch(function(e){return function(t,a){t({type:"ADD_COUNTER"}),m.addCounter(e).then(function(e){return t({type:"ADD_COUNTER_SUCCESS",payload:a().counters.data.concat(e).sort(O(a().counters.orderBy))})}).catch(function(e){return t({type:"ADD_COUNTER_ERROR",payload:e})})}}(e))}},{key:"handleIncrease",value:function(e){this.props.dispatch(f(e,"increase"))}},{key:"handleDecrease",value:function(e){this.props.dispatch(f(e,"decrease"))}},{key:"handleRemove",value:function(e){var t;this.props.dispatch((t=e,function(e,a){e({type:"REMOVE_COUNTER"}),m.removeCounter(t).then(function(t){return e({type:"REMOVE_COUNTER_SUCCESS",payload:a().counters.data.filter(function(e){return e.id!==t}).sort(O(a().counters.orderBy))})}).catch(function(t){return e({type:"REMOVE_COUNTER_ERROR",payload:t})})}))}},{key:"handleOrderBy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title";this.props.dispatch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title";return function(t,a){var n=a().counters.data;return t({type:"SET_ORDER",payload:{order:e,data:n.sort(O(e))}})}}(e))}},{key:"render",value:function(){var e=this.props.counters;return r.a.createElement("div",{className:"body"},r.a.createElement(_.a,null,r.a.createElement("h1",{className:"display-3"},"Bienvenido a CounterTest!"),r.a.createElement("p",{className:"lead"},"Este es un test de contadores para cornershop"),r.a.createElement("hr",{className:"my-2"}),r.a.createElement(N.a,null,r.a.createElement(U.a,{xs:"6"},r.a.createElement(F,{onSubmit:this.handleAddCounter})),r.a.createElement(U.a,{xs:"6"},r.a.createElement(x,{countersState:e,onOrder:this.handleOrderBy,onDecrease:this.handleDecrease,onIncrease:this.handleIncrease,onRemove:this.handleRemove})))))}}]),t}(r.a.Component),M=Object(l.b)(function(e){return{counters:e.counters}})(I),H=Object(i.d)(b,Object(i.a)(u.a,s.logger));var J=function(){return r.a.createElement(l.a,{store:H},r.a.createElement("div",{className:"root"},r.a.createElement(M,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.6270c3b7.chunk.js.map